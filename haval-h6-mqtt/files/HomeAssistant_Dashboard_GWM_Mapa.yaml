title: Haval H6 Dashboard
config_template_card_vars:
  VEICULO: states['select.gwmbrasil_veiculos_registrados'].state
views:
  - type: panel
    path: gwm-dashboard
    title: GWM Dashboard
    icon: mdi:car-electric
    cards:
      - type: custom:config-template-card
        entities:
          - select.gwmbrasil_veiculos_registrados
          - >-
            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_agendamento_de_carga
          - binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_da_trava
          - >-
            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_do_ar_condicionado
          - >-
            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_do_controle_de_carga
          - >-
            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_do_purificador_de_ar
          - >-
            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_dianteira_direita
          - >-
            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_dianteira_esquerda
          - binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_malas
          - >-
            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_traseira_direita
          - >-
            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_traseira_esquerda
          - device_tracker.gwmbrasil_${VEICULO.toLowerCase()}
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_autonomia_combustao
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_autonomia_ev
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_capacidade_do_tanque
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_cor_do_veiculo
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_da_carga
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_de_carga_12v
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_de_carga_soc
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_do_motor
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_imagem_do_veiculo
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_nivel_de_combustivel
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_posicao_do_teto_solar
          - >-
            sensor.gwmbrasil_${VEICULO.toLowerCase()}_pressao_do_pneu_dianteiro_direito
          - >-
            sensor.gwmbrasil_${VEICULO.toLowerCase()}_pressao_do_pneu_dianteiro_esquerdo
          - >-
            sensor.gwmbrasil_${VEICULO.toLowerCase()}_pressao_do_pneu_traseiro_direito
          - >-
            sensor.gwmbrasil_${VEICULO.toLowerCase()}_pressao_do_pneu_traseiro_esquerdo
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_quilometragem_total
          - >-
            sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_do_pneu_dianteiro_direito
          - >-
            sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_do_pneu_dianteiro_esquerdo
          - >-
            sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_do_pneu_traseiro_direito
          - >-
            sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_do_pneu_traseiro_esquerdo
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_tempo_de_carga
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_dianteiro_direito
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_dianteiro_esquerdo
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_traseiro_direito
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_traseiro_esquerdo
          - >-
            button.gwmbrasil_${VEICULO.toLowerCase()}_ativacao_do_ar_condicionado
          - button.gwmbrasil_${VEICULO.toLowerCase()}_interromper_carregamento
          - button.gwmbrasil_${VEICULO.toLowerCase()}_historico_de_carregamento
        card:
          type: vertical-stack
          cards:
            - type: custom:mushroom-select-card
              entity: select.gwmbrasil_veiculos_registrados
              icon_color: disabled
              layout: horizontal
              tap_action:
                action: none
              card_mod:
                style: |
                  :host {
                    display: {% if state_attr('select.gwmbrasil_veiculos_registrados', 'options') | length > 1 %} block {% else %} none {% endif %};
                  }
            - type: custom:stack-in-card
              mode: horizontal
              cards:
                - type: custom:button-card
                  name: ' '
                  entity_picture: >
                    [[[ return
                    states["sensor.gwmbrasil_${VEICULO.toLowerCase()}_imagem_do_veiculo"].state
                    ]]]
                  size: 400px
                  show_entity_picture: true
                  tap_action:
                    action: none
                  hold_action:
                    action: none
                  card_mod:
                    style: |
                      ha-card {
                        background: rgba(0,0,0,0.0);
                        border: 0px;
                        box-shadow: 0px 0px rgba(0,0,0,0);
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        position: absolute;
                        top: 25%;
                      }
                      img {
                        max-width: 100%;
                        height: auto;
                        object-fit: contain;
                      }
                - type: custom:stack-in-card
                  mode: vertical
                  keep:
                    background: false
                    box_shadow: false
                    border_radius: false
                    margin: false
                    outer_padding: false
                  card_mod:
                    style: |
                      ha-card {
                        background: rgba(0,0,0,0);
                        border: 0px;
                        box-shadow: 0px 0px rgba(0,0,0,0);
                      }
                  cards:
                    - type: picture
                      image: /local/images/haval_h6/h6.png
                      tap_action:
                        action: none
                      hold_action:
                        action: none
                      card_mod:
                        style: |
                          :host {
                            z-index: 3;
                            position: relative;
                          }
                          ha-card {
                            max-width: 441px;
                            max-height: 400px;
                            border: 0px;
                            background: rgba(0,0,0,0);
                          }
                          img {
                            max-width: 100%;
                            max-height: 100%;
                            object-fit: contain;
                          }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_do_ar_condicionado
                          state: 'on'
                      card:
                        type: picture
                        image: /local/images/haval_h6/ac_direita.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 6;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_do_ar_condicionado
                          state: 'on'
                      card:
                        type: picture
                        image: /local/images/haval_h6/ac_esquerda.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 6;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_dianteira_direita
                          state: 'on'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/porta_dianteira_direita_aberta.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 4;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_dianteira_direita
                          state: 'off'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/porta_dianteira_direita_fechada.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 4;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_dianteira_esquerda
                          state: 'on'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/porta_dianteira_esquerda_aberta.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 4;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_dianteira_esquerda
                          state: 'off'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/porta_dianteira_esquerda_fechada.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 4;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_malas
                          state: 'on'
                      card:
                        type: picture
                        image: /local/images/haval_h6/porta_malas.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 4;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_traseira_direita
                          state: 'on'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/porta_traseira_direita_aberta.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 4;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_traseira_direita
                          state: 'off'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/porta_traseira_direita_fechada.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 4;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_traseira_esquerda
                          state: 'on'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/porta_traseira_esquerda_aberta.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 4;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_traseira_esquerda
                          state: 'off'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/porta_traseira_esquerda_fechada.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 4;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            sensor.gwmbrasil_${VEICULO.toLowerCase()}_posicao_do_teto_solar
                          state_not: '3'
                      card:
                        type: picture
                        image: /local/images/haval_h6/teto_solar_aberto.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 4;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_da_trava
                          state: 'off'
                      card:
                        type: picture
                        image: /local/images/haval_h6/trava.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 2;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_do_ar_condicionado
                          state: 'on'
                      card:
                        type: picture
                        image: /local/images/haval_h6/ventilacao.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 5;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_dianteiro_direito
                          state: '2'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/vidro_dianteiro_direito_aberto.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 6;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_dianteiro_direito
                          state: '3'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/vidro_dianteiro_direito_entreaberto.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 5;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_dianteiro_esquerdo
                          state: '2'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/vidro_dianteiro_esquerdo_aberto.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 6;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_dianteiro_esquerdo
                          state: '3'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/vidro_dianteiro_esquerdo_entreaberto.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 5;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_traseiro_direito
                          state: '2'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/vidro_traseiro_direito_aberto.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 6;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_traseiro_direito
                          state: '3'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/vidro_traseiro_direito_entreaberto.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 5;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_traseiro_esquerdo
                          state: '2'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/vidro_traseiro_esquerdo_aberto.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 6;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_traseiro_esquerdo
                          state: '3'
                      card:
                        type: picture
                        image: >-
                          /local/images/haval_h6/vidro_traseiro_esquerdo_entreaberto.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 5;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_da_carga
                          state: '1'
                      card:
                        type: picture
                        image: /local/images/haval_h6/carga_carregando.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 1;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_da_carga
                          state: '5'
                      card:
                        type: picture
                        image: /local/images/haval_h6/carga_aguardando.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 1;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
                    - type: conditional
                      conditions:
                        - entity: >-
                            sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_da_carga
                          state: '4'
                      card:
                        type: picture
                        image: /local/images/haval_h6/carga_naocarregando.png
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            :host {
                              position: absolute;
                              top: 0;
                              left: 0;
                              z-index: 1;
                            }
                            ha-card {
                              max-width: 441px;
                              max-height: 400px;
                              border: 0px;
                              background: rgba(0,0,0,0);
                            }
                            img {
                              max-width: 100%;
                              max-height: 100%;
                              object-fit: contain;
                            }
              card_mod:
                style: |
                  ha-card {
                    display: flex;
                    border: 0px;
                    justify-content: center;
                    align-items: center;
                  }
            - type: custom:stack-in-card
              mode: horizontal
              cards:
                - type: custom:mushroom-title-card
                  title: >-
                    {{
                    states("sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo")
                    }}
                  subtitle: >-
                    {{
                    states("sensor.gwmbrasil_${VEICULO.toLowerCase()}_cor_do_veiculo")
                    }}
                  title_tap_action:
                    action: none
                  subtitle_tap_action:
                    action: none
              card_mod:
                style: |
                  ha-card {
                    display: flex;
                    border: 0px;            
                    justify-content: center;
                    align-items: center;
                  }
            - type: horizontal-stack
              cards:
                - type: custom:entity-progress-card
                  entity: sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_de_carga_soc
                  name: Bateria
                  icon: mdi:battery
                  card_mod:
                    style: |
                      :host {
                        {% set modelo = states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo').split(' ') %}
                        {% if 'HEV' in modelo  or 'TANK' in modelo %}
                          display: none
                        {% endif %} !important;
                      }
                - type: custom:entity-progress-card
                  entity: >-
                    sensor.gwmbrasil_${VEICULO.toLowerCase()}_nivel_de_combustivel
                  name: Combustível
                  icon: mdi:gas-station
                  show:
                    name: true
                    percentage: false    
                    value: true
                  value_template: >
                    {{ state_attr('sensor.gwmbrasil_combustivel_percent', 'display_value') }}
                  severity:
                    - from: 0
                      to: 49
                      color: "#540000"
                    - from: 50
                      to: 99
                      color: "#ffa200"
                    - from: 100
                      to: 100
                      color: "#009c72"
                  card_mod:
                    style: |
                      :host {
                        {% set modelo = states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo').split(' ') %}
                        {% if 'HAVAL' not in modelo %}
                          display: none
                        {% endif %} !important;
                      }
                - type: custom:entity-progress-card
                  entity: sensor.gwmbrasil_autonomia_ev_percent
                  name: Autonomia EV
                  icon: mdi:ev-station
                  show:
                    name: true
                    percentage: true      
                  severity:
                    - from: 0
                      to: 49
                      color: "#540000"
                    - from: 50
                      to: 99
                      color: "#ffa200"
                    - from: 100
                      to: 100
                      color: "#009c72"
                  card_mod:
                    style: |
                      :host {
                        {% set modelo = states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo').split(' ') %}
                        {% if 'TANK' not in modelo  %}
                          display: none
                        {% endif %} !important;
                      }
                - type: custom:entity-progress-card
                  entity: sensor.gwmbrasil_autonomia_combustao_percent
                  name: Autonomia Combustão
                  icon: mdi:car-electric
                  show:
                    name: true
                    percentage: false
                    value: true
                  severity:
                    - from: 0
                      to: 24
                      color: "#540000"
                    - from: 25
                      to: 84
                      color: "#ffa200"
                    - from: 85
                      to: 100
                      color: "#009c72"
                  card_mod:
                    style: |
                      :host {
                        {% set modelo = states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo').split(' ') %}
                        {% if 'TANK' not in modelo %}
                          display: none
                        {% endif %} !important;
                      }
            - type: custom:collapsable-cards
              title: Monitoramento dos pneus
              defaultOpen: true
              cards:
                - type: vertical-stack
                  cards:
                    - type: horizontal-stack
                      cards:
                        - type: custom:mini-graph-card
                          name: Dianteiro Esquerdo
                          entities:
                            - >-
                              sensor.gwmbrasil_${VEICULO.toLowerCase()}_pressao_do_pneu_dianteiro_esquerdo
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_do_pneu_dianteiro_esquerdo
                              show_fill: false
                          icon: mdi:arrow-top-left
                          align_icon: left
                          align_state: center
                          hours_to_show: 48
                          points_per_hour: 0.25
                          tap_action:
                            action: none
                          hold_action:
                            action: none
                          show:
                            fill: true
                        - type: custom:mini-graph-card
                          name: Dianteiro Direito
                          entities:
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_pressao_do_pneu_dianteiro_direito
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_do_pneu_dianteiro_direito
                              show_fill: false
                          icon: mdi:arrow-top-right
                          align_icon: left
                          align_state: center
                          hours_to_show: 48
                          points_per_hour: 0.25
                          tap_action:
                            action: none
                          hold_action:
                            action: none
                          show:
                            fill: true
                        - type: custom:mini-graph-card
                          name: Traseiro Esquerdo
                          entities:
                            - >-
                              sensor.gwmbrasil_${VEICULO.toLowerCase()}_pressao_do_pneu_traseiro_esquerdo
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_do_pneu_traseiro_esquerdo
                              show_fill: false
                          icon: mdi:arrow-bottom-left
                          align_icon: left
                          align_state: center
                          hours_to_show: 48
                          points_per_hour: 0.25
                          tap_action:
                            action: none
                          hold_action:
                            action: none
                          show:
                            fill: true
                        - type: custom:mini-graph-card
                          name: Traseiro Direito
                          entities:
                            - >-
                              sensor.gwmbrasil_${VEICULO.toLowerCase()}_pressao_do_pneu_traseiro_direito
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_do_pneu_traseiro_direito
                              show_fill: false
                          icon: mdi:arrow-bottom-right
                          align_icon: left
                          align_state: center
                          hours_to_show: 48
                          points_per_hour: 0.25
                          tap_action:
                            action: none
                          hold_action:
                            action: none
                          show:
                            fill: true
            - type: custom:collapsable-cards
              title: Autonomia e pneus
              defaultOpen: true
              cards:
                - type: horizontal-stack
                  cards:
                    - type: vertical-stack
                      cards:
                        - type: entities
                          entities:
                            - type: custom:template-entity-row
                              entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_do_motor
                              name: Estado do motor
                              state: >-
                                ${
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_do_motor'].state
                                === '0' ? 'Desligado' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_do_motor'].state
                                === '1' ? 'Ligado' : 'Desconhecido'}
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_quilometragem_total
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_de_carga_12v
                              secondary_info: last-updated
                              state_color: true
                              card_mod:
                                style: |
                                  :host {
                                    {% set modelo = states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo').split(' ') %}
                                    {% if 'TANK' in modelo %}
                                      display: none
                                    {% endif %} !important;
                                  }
                            - type: custom:template-entity-row
                              name: Autonomia Total
                              state: |-
                                ${
                                  parseFloat(states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_autonomia_combustao'].state) +
                                  parseFloat(states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_autonomia_ev'].state) + " km"
                                  ;
                                }
                              stateq: >-
                                {{ (
                                (states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_autonomia_combustao')
                                | float(0)) +
                                (states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_autonomia_ev')
                                | float(0)) ) | round(2) }} km
                              icon: mdi:numeric
                              card_mod:
                                style: |
                                  :host {
                                    {% set modelo = states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo').split(' ') %}
                                    {% if 'PHEV' not in modelo %}
                                      display: none
                                    {% endif %} !important;
                                  }
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_autonomia_combustao
                              card_mod:
                                style: |
                                  :host {
                                    {% set modelo = states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo').split(' ') %}
                                    {% if 'ORA' in modelo %}
                                      display: none
                                    {% endif %} !important;
                                  }
                                  ha-card {
                                    border-width: 0px !important;
                                    background: none
                                  }
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_nivel_de_combustivel
                              card_mod:
                                style: |
                                  :host {
                                    {% set modelo = states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo').split(' ') %}
                                    {% if 'HAVAL' not in modelo %}
                                      display: none
                                    {% endif %} !important;
                                  }
                                  ha-card {
                                    border-width: 0px !important;
                                    background: none
                                  }
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_autonomia_ev
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_de_carga_soc
                              state_color: true
                            - type: custom:template-entity-row
                              entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_da_carga
                              name: Estado de Carregamento
                              state: >-
                                ${
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_da_carga'].state
                                === '0' ? 'Desconectado' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_da_carga'].state
                                === '1' ? 'Carregando' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_da_carga'].state
                                === '2' ? 'Programado' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_da_carga'].state
                                === '3' ? 'Finalizado' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_da_carga'].state
                                === '5' ? 'Aguardando liberação' :
                                'Desconhecido' }
                            - entity: >-
                                binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_agendamento_de_carga
                              state: >-
                                ${
                                states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_agendamento_de_carga'].state
                                === 'off' ? 'Sem agendamento' :
                                states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_agendamento_de_carga'].state
                                === 'on' ? 'Carregamento programado' :
                                'Desconhecido'}
                              card_mod:
                                style: |
                                  :host {
                                    display: {% if is_state('sensor.gwmbrasil_${VEICULO.toLowerCase()}_agendamento_de_carga','on') %} block {% else %} none {% endif %};
                                  }
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_tempo_de_carga
                              card_mod:
                                style: |
                                  :host {
                                    display: {% if is_state('sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_da_carga','1') %} block {% else %} none {% endif %};
                                  }
                            - type: custom:mushroom-template-card
                              primary: Interromper carregamento
                              icon: mdi:ev-plug-type2
                              entity: >-
                                button.gwmbrasil_${VEICULO.toLowerCase()}_interromper_carregamento
                              hold_action:
                                action: none
                              tap_action:
                                action: toggle
                                confirmation:
                                  text: >-
                                    Tem certeza de que deseja interromper o
                                    carregamento?
                              card_mod:
                                style: |
                                  :host {
                                    display: {% if states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_da_carga') in ['1','5'] %} block {% else %} none {% endif %};
                                  }
                          card_mod:
                            style: |
                              :host {
                                {% set modelo = states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo').split(' ') %}
                                {% if 'HEV' in modelo  %}
                                  display: none
                                {% endif %} !important;
                              }
                              ha-card {
                                border-width: 0px !important;
                                background: none
                              }
                    - type: vertical-stack
                      cards:
                        - type: entities
                          entities:
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_pressao_do_pneu_dianteiro_esquerdo
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_do_pneu_dianteiro_esquerdo
                          card_mod:
                            style: |
                              ha-card {
                                border-width: 0px !important;
                                background: none
                              }
                        - type: entities
                          entities:
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_pressao_do_pneu_dianteiro_direito
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_do_pneu_dianteiro_direito
                          card_mod:
                            style: |
                              ha-card {
                                border-width: 0px !important;
                                background: none
                              }
                        - type: entities
                          entities:
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_pressao_do_pneu_traseiro_esquerdo
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_do_pneu_traseiro_esquerdo
                          card_mod:
                            style: |
                              ha-card {
                                border-width: 0px !important;
                                background: none
                              }
                        - type: entities
                          entities:
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_pressao_do_pneu_traseiro_direito
                            - entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_do_pneu_traseiro_direito
                          card_mod:
                            style: |
                              ha-card {
                                border-width: 0px !important;
                                background: none
                              }
              card_mod:
                style: |
                  ha-card {
                    border-width: 5px !important;
                    background: none
                  }
            - type: custom:collapsable-cards
              title: Climatização
              defaultOpen: true
              cards:
                - type: entities
                  entities:
                    - type: custom:template-entity-row
                      entity: >-
                        binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_do_ar_condicionado
                      name: Ar Condicionado
                      state: >-
                        ${
                        states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_do_ar_condicionado'].state
                        === 'off' ? 'Desligado' :
                        states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_do_ar_condicionado'].state
                        === 'on' ? 'Ligado' : 'Desconhecido'}
                    - type: custom:mushroom-template-card
                      primary: Ligar A/C
                      icon: mdi:fan-clock
                      secondary: Acionar por 15 minutos em 18°C
                      entity: >-
                        button.gwmbrasil_${VEICULO.toLowerCase()}_ativacao_do_ar_condicionado
                      hold_action:
                        action: none
                      tap_action:
                        action: toggle
                        confirmation:
                          text: >-
                            Tem certeza de que deseja ligar o ar condicionado? O
                            veículo tem que estar trancado, desligado e, para
                            modelos PHEV, não pode estar em carregamento ou com
                            o plugue conectado.
                      card_mod:
                        style: >
                          :host {
                            display: ${
                          states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_do_ar_condicionado'].state

                          === 'on' ? 'none' :

                          states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_da_trava'].state

                          === 'on' ? 'none' :

                          states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_do_motor'].state

                          === '1' ? 'none' : 'block' }
                    - type: custom:template-entity-row
                      entity: >-
                        binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_do_purificador_de_ar
                      name: Purificador de ar
                      state: >-
                        ${
                        states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_do_purificador_de_ar'].state
                        === 'off' ? 'Desligado' :
                        states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_do_purificador_de_ar'].state
                        === 'on' ? 'Ligado' : 'Desconhecido'}
                      card_mod:
                        style: |
                          :host {
                            {% set modelo = states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo').split(' ') %}
                            {% if 'TANK' in modelo %}
                              display: none
                            {% endif %} !important;
                          }              
                  card_mod:
                    style: |
                      ha-card {
                        border-width: 0px !important;
                        background: none
                      }
                - type: entities
                  entities:
                    - entity: >-
                        sensor.gwmbrasil_${VEICULO.toLowerCase()}_temperatura_da_cabine
                    - entity: >-
                        binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_aquecimento_da_cabine
                    - entity: >-
                        binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_aquecimento_do_banco_do_motorista
                    - entity: >-
                        binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_aquecimento_do_banco_do_passageiro
                    - entity: >-
                        binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_aquecimento_do_volante
                  card_mod:
                    style: |
                      :host {
                        {% set modelo = states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_modelo_do_veiculo').split(' ') %}
                        {% if 'TANK' not in modelo %}
                          display: none
                        {% endif %} !important;
                      }
                      ha-card {
                        border-width: 0px !important;
                        background: none
                      }
            - type: custom:collapsable-cards
              title: Portas e vidros
              defaultOpen: true
              cards:
                - type: horizontal-stack
                  cards:
                    - type: entities
                      entities:
                        - type: custom:template-entity-row
                          entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_da_trava
                          name: Trava das portas
                          color: >-
                            ${
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_da_trava'].state
                            === 'on' ? 'red' : '' }
                          icon: >-
                            ${
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_da_trava'].state
                            === 'off' ? 'mdi:car-door-lock' :
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_da_trava'].state
                            === 'on' ? 'mdi:car-door-lock-open' :
                            'mdi:cloud-question' }
                          state: >-
                            ${
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_da_trava'].state
                            === 'off' ? 'Trancada' :
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_estado_da_trava'].state
                            === 'on' ? 'Destrancada' : 'Desconhecido'}
                        - type: custom:template-entity-row
                          entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_dianteira_esquerda
                          name: Dianteira esquerda
                          color: >-
                            ${
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_dianteira_esquerda'].state
                            === 'on' ? 'red' : '' }
                          state: >-
                            ${
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_dianteira_esquerda'].state
                            === 'off' ? 'Fechada' :
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_dianteira_esquerda'].state
                            === 'on' ? 'Aberta' : 'Desconhecido'}
                        - type: custom:template-entity-row
                          entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_dianteira_direita
                          name: Dianteira direita
                          color: >-
                            ${
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_dianteira_direita'].state
                            === 'on' ? 'red' : '' }
                          state: >-
                            ${
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_dianteira_direita'].state
                            === 'off' ? 'Fechada' :
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_dianteira_direita'].state
                            === 'on' ? 'Aberta' :
                            'Desconhecido'}                
                        - type: custom:template-entity-row
                          entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_traseira_esquerda
                          name: Traseira esquerda
                          color: >-
                            ${
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_traseira_esquerda'].state
                            === 'on' ? 'red' : '' }
                          state: >-
                            ${
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_traseira_esquerda'].state
                            === 'off' ? 'Fechada' :
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_traseira_esquerda'].state
                            === 'on' ? 'Aberta' : 'Desconhecido'}
                        - type: custom:template-entity-row
                          entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_traseira_direita
                          name: Traseira direita
                          color: >-
                            ${
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_traseira_direita'].state
                            === 'on' ? 'red' : '' }
                          state: >-
                            ${
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_traseira_direita'].state
                            === 'off' ? 'Fechada' :
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_traseira_direita'].state
                            === 'on' ? 'Aberta' : 'Desconhecido'}
                        - type: custom:template-entity-row
                          entity: >-
                            binary_sensor.gwmbrasil_${VEICULO.toLowerCase()}_porta_malas
                          name: Porta malas
                          state: >-
                            ${
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_malas'].state
                            === 'off' ? 'Fechado' :
                            states['binary_sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_porta_malas'].state
                            === 'on' ? 'Aberto' : 'Desconhecido'}
                      state_color: false
                      card_mod:
                        style: |
                          ha-card {
                            border-width: 0px !important;
                            background: none
                          }
                    - type: vertical-stack
                      cards:
                        - type: entities
                          entities:
                            - type: custom:template-entity-row
                              entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_dianteiro_esquerdo
                              name: Dianteiro esquerdo
                              color: >-
                                ${
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_dianteiro_esquerdo'].state
                                !== '1' ? 'red' : '' }
                              state: >-
                                ${
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_dianteiro_esquerdo'].state
                                === '1' ? 'Fechado' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_dianteiro_esquerdo'].state
                                === '2' ? 'Aberto' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_dianteiro_esquerdo'].state
                                === '3' ? 'Entreaberto' : 'Desconhecido' }
                            - type: custom:template-entity-row
                              entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_dianteiro_direito
                              name: Dianteiro direito
                              color: >-
                                ${
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_dianteiro_direito'].state
                                !== '1' ? 'red' : '' }
                              state: >-
                                ${
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_dianteiro_direito'].state
                                === '1' ? 'Fechado' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_dianteiro_direito'].state
                                === '2' ? 'Aberto' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_dianteiro_direito'].state
                                === '3' ? 'Entreaberto' : 'Desconhecido' }
                            - type: custom:template-entity-row
                              entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_traseiro_esquerdo
                              name: Traseiro esquerdo
                              color: >-
                                ${
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_traseiro_esquerdo'].state
                                !== '1' ? 'red' : '' }
                              state: >-
                                ${
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_traseiro_esquerdo'].state
                                === '1' ? 'Fechado' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_traseiro_esquerdo'].state
                                === '2' ? 'Aberto' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_traseiro_esquerdo'].state
                                === '3' ? 'Entreaberto' : 'Desconhecido' }
                            - type: custom:template-entity-row
                              entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_vidro_traseiro_direito
                              name: Traseiro direito
                              color: >-
                                ${
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_traseiro_direito'].state
                                !== '1' ? 'red' : '' }
                              state: >-
                                ${
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_traseiro_direito'].state
                                === '1' ? 'Fechado' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_traseiro_direito'].state
                                === '2' ? 'Aberto' :
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_vidro_traseiro_direito'].state
                                === '3' ? 'Entreaberto' : 'Desconhecido' }
                          card_mod:
                            style: |
                              ha-card {
                                border-width: 0px !important;
                                background: none
                              }
                        - type: entities
                          entities:
                            - type: custom:template-entity-row
                              entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_posicao_do_teto_solar
                              name: Teto Solar
                              state: >-
                                ${
                                states['sensor.gwmbrasil_'+VEICULO.toLowerCase()+'_posicao_do_teto_solar'].state
                                === '3' ? 'Fechado' : 'Aberto'}
                            - type: custom:mushroom-template-card
                              entity: >-
                                sensor.gwmbrasil_${VEICULO.toLowerCase()}_posicao_do_teto_solar
                              name: Teto Solar
                              tap_action:
                                action: none
                              hold_action:
                                action: none
                              min: 0
                              max: 100
                              unit_of_measurement: '%'
                              severity:
                                - value: 0
                                  color: '#009c72'
                                - value: 50
                                  color: '#ffa200'
                                - value: 100
                                  color: '#540000'
                              card_mod:
                                style: |
                                  :host {
                                    display: {% if is_state('sensor.gwmbrasil_${VEICULO.toLowerCase()}_posicao_do_teto_solar','3') %} none {% elif states('sensor.gwmbrasil_${VEICULO.toLowerCase()}_posicao_do_teto_solar') is none %} none {% else %} block {% endif %};
                                  }              
                          card_mod:
                            style: |
                              :host {
                                {% if is_state('sensor.gwmbrasil_${VEICULO.toLowerCase()}_posicao_do_teto_solar','unknown') %} display: none !important {% endif %};
                              }
                              ha-card {
                                border-width: 0px !important;
                                background: none
                              }
            - type: conditional
              conditions:
                - entity: device_tracker.gwmbrasil_${VEICULO.toLowerCase()}
                  state_not: unavailable
              card:
                type: custom:collapsable-cards
                title: Mapa
                defaultOpen: true
                cards:
                  - type: map
                    entities:
                      - entity: device_tracker.gwmbrasil_${VEICULO.toLowerCase()}
                    theme_mode: dark
                    default_zoom: 16
                    hours_to_show: 30
                    auto_fit: true
                    aspect_ratio: '16:9'
  - type: panel
    path: gwm-charging-history
    cards:
      - type: custom:config-template-card
        entities:
          - button.gwmbrasil_${VEICULO.toLowerCase()}_historico_de_carregamento
          - sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_de_carga_soc
        card:
          type: vertical-stack
          cards:
            - type: custom:mushroom-template-card
              primary: Atualizar histórico de carregamento
              icon: mdi:clipboard-clock-outline
              entity: >-
                button.gwmbrasil_${VEICULO.toLowerCase()}_historico_de_carregamento
              hold_action:
                action: none
              tap_action:
                action: toggle
            - type: custom:gwm-charging-history-card
              entity: sensor.gwmbrasil_${VEICULO.toLowerCase()}_estado_de_carga_soc
    title: Histórico de carregamento
    icon: mdi:clipboard-text-clock
    subview: false
  - type: panel
    path: mapa
    title: Mapa
    icon: mdi:map-marker-distance
    cards:
      - type: grid
        square: false
        cards:
          - type: energy-date-selection
            card_mod:
              style: |
                ha-card {
                  z-index: 1;
                  position: absolute;
                  height: 80px !important;
                  width: 80%;
                  top: 75px;
                  right: 10px;
                  max-width: 450px;
                  color: white;
                  background: rgb(0,0,0,0.7);
                }
          - type: custom:map-card
            history_date_selection: true
            entities:
              - entity: device_tracker.gwmbrasil_selected_vehicle
            card_mod:
              style: |
                ha-card {
                  margin-top: -10px;
                }
                ha-card #map {
                  height:calc(100vh - 56px);
                  border-radius:0;
                }
        columns: 1
